<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Temporarily relaxed CSP for debugging -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; media-src 'self' data: blob:; font-src 'self' data:; connect-src 'self' ws: wss:;" />
    <title>Poetry Slam Admin</title>
    <link rel="stylesheet" href="./fonts/SourceSansPro-Black.css" />
    <link rel="stylesheet" href="./fonts/SourceSansPro-Light.css" />
    <link rel="stylesheet" href="admin.min.css" />

    <script src="admin.min.js"></script>
    
    <!-- Debug: Check if files exist -->
    <script>
      console.log('üîç Admin HTML loaded');
      fetch('admin.min.js').then(r => console.log('‚úÖ admin.min.js:', r.status)).catch(e => console.error('‚ùå admin.min.js:', e));
      fetch('admin.min.css').then(r => console.log('‚úÖ admin.min.css:', r.status)).catch(e => console.error('‚ùå admin.min.css:', e));
    </script>
  </head>

  <body layout="row" ng-app="psadmin">
    <background-audio audio-shortcuts></background-audio>

    <md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="true">
      <a href="admin.html#/">
        <img src="./media/logo/logo.png" class="sidebar-logo" />
      </a>

      <md-content class="sidenav-menu">
        <sidenav-entry path="'/'" label="'Status'"></sidenav-entry>
        <sidenav-entry path="'/presentation'" label="'Pr√§sentation'"></sidenav-entry>
        <sidenav-entry path="'/participants'" label="'Poeten'"></sidenav-entry>
        <sidenav-entry path="'/competitions'" label="'Wettbewerbe'"></sidenav-entry>
        <div layout="column" class="sidenav-sublevel">
          <div layout="column" ng-repeat="competition in event.competitions">
            <sidenav-entry path="'/competitions/' + competition.id + '/groups'" label="competition.name"></sidenav-entry>
            <div layout="column" class="sidenav-sublevel" ng-show="competition.groups">
              <sidenav-entry
                ng-repeat="group in competition.groups"
                path="'/competitions/' + competition.id + '/groups/' + group.id"
                label="group.name"
              ></sidenav-entry>
            </div>
          </div>
        </div>
        <sidenav-entry path="'/videos'" label="'Videos'"></sidenav-entry>
        <sidenav-entry path="'/sounds'" label="'Sounds'"></sidenav-entry>
        <sidenav-entry path="'/AdmistrationInterface'" label="'Administration'"></sidenav-entry>
      </md-content>

      <iframe src="./index.html?embedded=1" class="preview-frame"></iframe>
    </md-sidenav>

    <md-content flex class="md-whiteframe-z2">
      <section class="content-container" ng-view></section>
    </md-content>
  </body>
</html>
